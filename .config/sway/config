
##################################################
# Global
##################################################
font pango:Terminus 8
include /etc/sway/config-vars.d/*

### Variables
set $subcfgs "/home/hyper/.config/sway/config.d"
include $subcfgs/variables

# Logo key. Use Mod1 for Alt.
set $mod Mod4
# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l


### Wallpaper
output * bg /home/hyper/.config/faces.png fill

### Input configuration
input "type:keyboard" {
    xkb_options caps:super
}


##################################################
# Key bindings
##################################################
#
# Kill focused window
bindsym $mod+x kill

# Drag floating windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
floating_modifier $mod normal

# Reload the configuration file
bindsym $mod+Shift+c reload

# Exit sway (logs you out of your Wayland session)
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'

# ======== Movement ========
#
# Move your focus around
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# Move the focused window with the same, but add Shift
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# ======== Workspaces ========
#
# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# quickly switch back and forth between most recently focused workspaces
bindsym $mod+slash workspace back_and_forth

# scroll through workspaces with arrows
bindsym $mod+Left workspace prev
bindsym $mod+Right workspace next

# ======== Layout stuff ========
#
# Toggle split mode
bindsym $mod+v split toggle

# Switch the current container between different layout styles
bindsym $mod+s layout stacking
bindsym $mod+e layout toggle splitv splith
bindsym $mod+t layout toggle splith tabbed

# Make the current focus fullscreen
bindsym $mod+f fullscreen

# Toggle window between tiling and floating mode
bindsym $mod+Shift+space floating toggle, resize set 800 800

# Swap focus between the tiling area and the floating area
bindsym $mod+period focus mode_toggle

# Move focus to the parent container
bindsym $mod+a focus parent
# Move focus to the child container
bindsym $mod+z focus child

# ========Scratchpad ========
#
# Move the currently focused window to the scratchpad
bindsym $mod+Shift+minus floating enable, resize set 800 600; move scratchpad

# Cycle through scratchpad windows
bindsym $mod+minus scratchpad show

# ======== Resize Mode ========
#
# Resize mode keybinds
include $subcfgs/resize-mode

# ======== Custom Bindings ========
#
## Custom mark/goto via menus
bindsym $mod+m exec $mark_menu
bindsym $mod+g exec $goto_menu

## Application-launcher keybinds
include $subcfgs/application-custom

## Media and backlight keybinds
include $subcfgs/media-controls


##################################################
## VISUAL/THEMING
##################################################
include $subcfgs/window-settings
# default colors (in case custom ones aren't set by the host-specific config below)
include $subcfgs/colors

## HOST-SPECIFIC CONFIG
include $subcfgs/$(hostname).config

# class                 border   bground  text     indi     child_border
client.focused          $cl_high $cl_high $cl_fore $cl_indi $cl_high
client.focused_inactive $cl_back $cl_back $cl_fore $cl_back $cl_back
client.unfocused        $cl_high $cl_gray $cl_fore $cl_back $cl_back
client.urgent           $cl_urge $cl_urge $cl_fore $cl_urge $cl_urge
client.background       #FFFFFF


# Status Bar:
bar {
    position top
    status_command i3status

    colors {
        background $cl_back
        statusline $cl_fore
        separator  $cl_gray

        focused_workspace  $cl_fore $cl_high    $cl_fore
        active_workspace   $cl_fore $cl_high    $cl_fore
        inactive_workspace $cl_gray $cl_back    $cl_fore
        urgent_workspace   $cl_urge $cl_urge    $cl_fore
        binding_mode       $cl_back $cl_urge    $cl_fore
    }
}


##################################################
## AUTOSTARTS
##################################################
#
# Startup applications
exec_always xrdb -load ~/.Xresources
# start dunst for notifications
exec dunst &
# load sway autostart desktop entries
exec dex --autostart --environment sway

# Idle configuration
exec ~/.config/sway/idle.sh &

# start 1password
exec "1password"

# start a term window with a new tmux session that will be auto-moved to scratchpad
exec "foot --app-id 'ctrl-term' tmn ctrl"

# kanshi systemd service
exec_always "sleep 1; systemctl --user restart kanshi.service"

# gammastep systemd service
exec "sleep 1; systemctl --user start gammastep.service"

include /etc/sway/config.d/*
